<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.nf.shopping.message.dao.NewsDao">
    <resultMap id="newsMap" type="edu.nf.shopping.message.entity.News">
        <result property="newsId" column="news_id"/>
        <result property="content" column="news_contents"/>
        <result property="imgName" column="img_name"/>
        <result property="authorId" column="news_author"/>
        <result property="goodsId" column="goods_id"/>
        <result property="time" column="news_time"/>
        <result property="notView" column="not_view"/>
    </resultMap>
    <select id="listUserNews" resultMap="newsMap">
        select ns.news_id,ns.news_contents,ns.img_name,ns.news_author,
        ns.goods_id,ns.news_time,nr.receive_uid
        from news ns INNER JOIN news_receive nr on ns.news_id=nr.ns_id
        where nr.receive_uid=#{param3}
    </select>
    <select id="findNotViewByUserId" resultType="String" parameterType="String">
        select COUNT(1) as not_view
        from news ns INNER JOIN news_receive nr on ns.news_id=nr.ns_id
        where nr.receive_uid=#{userId}  and nr.state='1'
    </select>
</mapper>